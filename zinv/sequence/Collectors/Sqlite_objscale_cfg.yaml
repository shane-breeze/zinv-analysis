name: "Events"
output: "/vols/cms/sdb15/database_outputs/"
variations:
    - ["eleEnergyScale", 1.]
    - ["eleEnergyScale", -1.]
    - ["muonPtScale", 1.]
    - ["muonPtScale", -1.]
    - ["photonEnergyScale", 1.]
    - ["photonEnergyScale", -1.]
    - ["jesTotal", 1.]
    - ["jesTotal", -1.]
    - ["jerSF", 1.]
    - ["jerSF", -1.]
    - ["unclust", 1.]
    - ["unclust", -1.]
attributes:
    Both:
        run: "ev: ev.run"
        luminosityBlock: "ev: ev.luminosityBlock"
        event: "ev: ev.event"
        isdata: "ev: np.full(ev.size, ev.config.dataset.isdata, dtype=np.bool8)"
        parent: "ev: np.full(ev.size, ev.config.dataset.parent)"
        sample: "ev: np.full(ev.size, ev.config.dataset.name)"
        METnoX_pt: "ev: ev.METnoX_pt(ev)"
        METnoX_phi: "ev: ev.METnoX_phi(ev)"
        MET_pt: "ev: ev.MET_ptShift(ev)"
        MET_phi: "ev: ev.MET_phiShift(ev)"
        CaloMET_pt: "ev: ev.CaloMET_pt"
        CaloMET_phi: "ev: ev.CaloMET_phi"
        MET_dCaloMET: "ev: ev.MET_dCaloMET(ev)"
        MinDPhiJ1234METnoX: "ev: ev.MinDPhiJ1234METnoX(ev)"
        MTW: "ev: ev.MTW(ev)"
        MLL: "ev: ev.MLL(ev)"
        nJetVeto: "ev: ev.JetVeto(ev, 'eta').counts"
        nJetSelection: "ev: ev.JetSelection(ev, 'eta').counts"
        LeadJetSelection_pt: "ev: get_nth_object(ev.JetSelection(ev, 'ptShift'), 0, ev.size)"
        LeadJetSelection_eta: "ev: get_nth_object(ev.JetSelection(ev, 'eta'), 0, ev.size)"
        LeadJetSelection_phi: "ev: get_nth_object(ev.JetSelection(ev, 'phi'), 0, ev.size)"
        LeadJetSelection_chHEF: "ev: get_nth_object(ev.JetSelection(ev, 'chHEF'), 0, ev.size)"
        LeadJetFwdSelection_pt: "ev: get_nth_object(ev.JetFwdSelection(ev, 'pt'), 0, ev.size)"
        LeadJetFwdSelection_eta: "ev: get_nth_object(ev.JetFwdSelection(ev, 'eta'), 0, ev.size)"
        LeadJetFwdSelection_phi: "ev: get_nth_object(ev.JetFwdSelection(ev, 'phi'), 0, ev.size)"
        NearestJetSelectionMET_pt: "ev: get_attr_for_min_ref(ev.JetSelection(ev, 'ptShift'), ev.JetSelection(ev, 'dphiMET'), ev.size)"
        NearestJetSelectionMET_eta: "ev: get_attr_for_min_ref(ev.JetSelection(ev, 'eta'), ev.JetSelection(ev, 'dphiMET'), ev.size)"
        NearestJetSelectionMET_phi: "ev: get_attr_for_min_ref(ev.JetSelection(ev, 'phi'), ev.JetSelection(ev, 'dphiMET'), ev.size)"
        SecondJetSelection_pt: "ev: get_nth_object(ev.JetSelection(ev, 'ptShift'), 1, ev.size)"
        SecondJetSelection_eta: "ev: get_nth_object(ev.JetSelection(ev, 'eta'), 1, ev.size)"
        SecondJetSelection_phi: "ev: get_nth_object(ev.JetSelection(ev, 'phi'), 1, ev.size)"
        nMuonVeto: "ev: ev.MuonVeto(ev, 'eta').counts"
        nMuonSelection: "ev: ev.MuonSelection(ev, 'eta').counts"
        LeadMuonSelection_pt: "ev: get_nth_object(ev.MuonSelection(ev, 'ptShift'), 0, ev.size)"
        LeadMuonSelection_eta: "ev: get_nth_object(ev.MuonSelection(ev, 'eta'), 0, ev.size)"
        LeadMuonSelection_phi: "ev: get_nth_object(ev.MuonSelection(ev, 'phi'), 0, ev.size)"
        SecondMuonSelection_pt: "ev: get_nth_object(ev.MuonSelection(ev, 'ptShift'), 1, ev.size)"
        SecondMuonSelection_eta: "ev: get_nth_object(ev.MuonSelection(ev, 'eta'), 1, ev.size)"
        SecondMuonSelection_phi: "ev: get_nth_object(ev.MuonSelection(ev, 'phi'), 1, ev.size)"
        nElectronVeto: "ev: ev.ElectronVeto(ev, 'eta').counts"
        nElectronSelection: "ev: ev.ElectronSelection(ev, 'eta').counts"
        LeadElectronSelection_pt: "ev: get_nth_object(ev.ElectronSelection(ev, 'ptShift'), 0, ev.size)"
        LeadElectronSelection_eta: "ev: get_nth_object(ev.ElectronSelection(ev, 'eta'), 0, ev.size)"
        LeadElectronSelection_phi: "ev: get_nth_object(ev.ElectronSelection(ev, 'phi'), 0, ev.size)"
        SecondElectronSelection_pt: "ev: get_nth_object(ev.ElectronSelection(ev, 'ptShift'), 1, ev.size)"
        SecondElectronSelection_eta: "ev: get_nth_object(ev.ElectronSelection(ev, 'eta'), 1, ev.size)"
        SecondElectronSelection_phi: "ev: get_nth_object(ev.ElectronSelection(ev, 'phi'), 1, ev.size)"
        nTauVeto: "ev: ev.TauVeto(ev, 'eta').counts"
        nTauSelection: "ev: ev.TauSelection(ev, 'eta').counts"
        LeadTauSelection_pt: "ev: get_nth_object(ev.TauSelection(ev, 'ptShift'), 0, ev.size)"
        LeadTauSelection_eta: "ev: get_nth_object(ev.TauSelection(ev, 'eta'), 0, ev.size)"
        LeadTauSelection_phi: "ev: get_nth_object(ev.TauSelection(ev, 'phi'), 0, ev.size)"
        nPhotonVeto: "ev: ev.PhotonVeto(ev, 'eta').counts"
        nPhotonSelection: "ev: ev.PhotonSelection(ev, 'eta').counts"
        nBJetVeto: "ev: ev.JetBVeto(ev, 'eta').counts"
        PV_npvsGood: "ev: ev.PV_npvsGood"
        LeptonCharge: "ev: ev.LeptonCharge(ev)"
        IsMETTriggered: "ev: ev.IsMETTriggered(ev)"
        IsSingleMuonTriggered: "ev: ev.IsSingleMuonTriggered(ev)"
        IsSingleElectronTriggered: "ev: ev.IsSingleElectronTriggered(ev)"
        Cutflow_Monojet: "ev: ev.Cutflow_Monojet(ev)"
        Cutflow_MonojetQCD: "ev: ev.Cutflow_MonojetQCD(ev)"
        Cutflow_SingleMuon: "ev: ev.Cutflow_SingleMuon(ev)"
        Cutflow_SingleMuonQCD: "ev: ev.Cutflow_SingleMuonQCD(ev)"
        Cutflow_DoubleMuon: "ev: ev.Cutflow_DoubleMuon(ev)"
        Cutflow_SingleElectron: "ev: ev.Cutflow_SingleElectron(ev)"
        Cutflow_SingleElectronQCD: "ev: ev.Cutflow_SingleElectronQCD(ev)"
        Cutflow_DoubleElectron: "ev: ev.Cutflow_DoubleElectron(ev)"
        Cutflow_DoubleElectronAlt: "ev: ev.Cutflow_DoubleElectronAlt(ev)"
        Cutflow_SingleTau: "ev: ev.Cutflow_SingleTau(ev)"
        Flag_goodVertices: "ev: ev.Flag_goodVertices"
        Flag_globalSuperTightHalo2016Filter: "ev: ev.Flag_globalSuperTightHalo2016Filter"
        Flag_HBHENoiseFilter: "ev: ev.Flag_HBHENoiseFilter"
        Flag_HBHENoiseIsoFilter: "ev: ev.Flag_HBHENoiseIsoFilter"
        Flag_EcalDeadCellTriggerPrimitiveFilter: "ev: ev.Flag_EcalDeadCellTriggerPrimitiveFilter"
        Flag_BadPFMuonFilter: "ev: ev.Flag_BadPFMuonFilter"
        Flag_BadGlobalMuon: "ev: ev.Flag_BadGlobalMuon"
        Flag_CloneGlobalMuon: "ev: ev.Flag_CloneGlobalMuon"
        Flag_eeBadScFilter: "ev: ev.Flag_eeBadScFilter"
    MC:
        MET_dpt: "ev: (ev.MET_pt-ev.MET_ptJESOnly)/ev.MET_ptJESOnly"
        MET_dphi: "ev: ev.MET_phi-ev.MET_phiJESOnly"
        LeadJetSelection_dpt: "ev: get_nth_object((ev.JetSelection(ev, 'pt')-ev.JetSelection(ev, 'ptJESOnly'))/ev.JetSelection(ev, 'ptJESOnly'), 0, ev.size)"
        nGenBosonSelection: "ev: ev.nGenBosons"
        LeptonIsElectron: "ev: getattr(ev, 'LeptonIsElectron', np.zeros(ev.size, dtype=np.bool8))"
        LeptonIsMuon: "ev: getattr(ev, 'LeptonIsMuon', np.zeros(ev.size, dtype=np.bool8))"
        LeptonIsTau: "ev: getattr(ev, 'LeptonIsTau', np.zeros(ev.size, dtype=np.bool8))"
        nGenTauL: "ev: getattr(ev, 'nGenTauL', np.zeros(ev.size, dtype=np.int32))"
        WeightXsLumi: "ev: ev.WeightXsLumi(ev)"
        WeightQcdEwk: "ev: ev.WeightQcdEwk(ev)"
        WeightPU: "ev: ev.WeightPU(ev)"
        WeightPreFiring: "ev: ev.WeightPreFiring(ev)"
        WeightMETTrig: "ev: ev.WeightMETTrig(ev)"
        WeightSingleMuonTrig: "ev: 1-jagged_prod(1-ev.MuonSelection(ev, 'WeightmuonTrigSF'))"
        WeightSingleElectronTrig: "ev: 1-jagged_prod(1-ev.ElectronSelection(ev, 'WeighteleTrigSF'))"
        WeightOneMinusElectronVetoNoSelectionIdIsoVeto: "ev: jagged_prod(1-ev.ElectronVetoNoSelection(ev, 'WeighteleIdIsoVetoSF'))"
        WeightOneMinusElectronSelectionIdIsoTight: "ev: jagged_prod(1-ev.ElectronSelection(ev, 'WeighteleIdIsoTightSF'))"
        WeightOneMinusElectronVetoReco: "ev: jagged_prod(1-ev.ElectronVeto(ev, 'WeighteleRecoSF'))"
        WeightOneMinusMuonVetoNoSelectionIdLoose: "ev: jagged_prod(1-ev.MuonVetoNoSelection(ev, 'WeightmuonIdLooseSF'))"
        WeightOneMinusMuonVetoNoSelectionIsoLoose: "ev: jagged_prod(1-ev.MuonVetoNoSelection(ev, 'WeightmuonIsoLooseSF'))"
        WeightOneMinusMuonSelectionIdTight: "ev: jagged_prod(1-ev.MuonSelection(ev, 'WeightmuonIdTightSF'))"
        WeightOneMinusMuonSelectionIsoTight: "ev: jagged_prod(1-ev.MuonSelection(ev, 'WeightmuonIsoTightSF'))"
        WeightOneMinusPhotonVetoIdLoose: "ev: jagged_prod(1-ev.PhotonVeto(ev, 'WeightphotonIdLooseSF'))"
        WeightOneMinusPhotonVetoPixelSeedVeto: "ev: jagged_prod(1-ev.PhotonVeto(ev, 'WeightphotonPixelSeedVetoSF'))"
        WeightOneMinusTauSelectionIdTight: "ev: jagged_prod(1-ev.TauSelection(ev, 'WeighttauIdTightSF'))"
        WeightOneMinusJetBVetoIdMedium: "ev: jagged_prod(1-ev.JetBVeto(ev, 'btagSF'))"
        WeightMuonSelectionIdTight: "ev: jagged_prod(ev.MuonSelection(ev, 'WeightmuonIdTightSF'))"
        WeightMuonSelectionIsoTight: "ev: jagged_prod(ev.MuonSelection(ev, 'WeightmuonIsoTightSF'))"
        WeightTauSelectionIdTight: "ev: jagged_prod(ev.TauSelection(ev, 'WeighttauIdTightSF'))"
        WeightElectronSelectionIdIsoTight: "ev: jagged_prod(ev.ElectronSelection(ev, 'WeighteleIdIsoTightSF'))"
        WeightElectronSelectionReco: "ev: jagged_prod(ev.ElectronSelection(ev, 'WeighteleRecoSF'))"
    Data:
        IsCertified: "ev: ev.IsCertified(ev)"
